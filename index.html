<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>My First Layout</title>
  <style>
    html {
      margin: 0;
      height: 100%;
    }
    body {
      margin: 0;
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    main {
      height: 100dvh;
      width: 100%;
      display: flex; 
      flex-direction: row;
    }

    nav {
      background: #c3c300;
    } 
    article {
      background: #fff;
      padding: 1em;
    }
    aside {
      width: 200px;
      background: #f5f5f5;
      padding: 1em;
    }
  </style>
</head>
<body>
    <header>ヘッダーです</header>
    <main style="flex: 1">
      <nav>
        <h2>コンテンツ領域の目次</h2>
        <ul>
          <li>項目1</li>
          <li>項目2</li>
        </ul>
      </nav>
      <article style="flex: 1">
        <h1>コンテンツ領域</h1>
        <p>ここにコンテンツが入ります</p>  
        
        <!-- polyline例 -->
        <svg width="200" height="100" style="border:1px solid #ccc;">
          <polyline points="10,10 60,80 120,20 180,90" fill="none" stroke="blue" stroke-width="2" />
        </svg>

        <!-- path例 -->
        <svg width="200" height="100" style="border:1px solid #ccc;">
            <path d="M10 10 L60 80 L120 20 L180 90" fill="none" stroke="red" stroke-width="2" />
        </svg>

        <!-- path例 追加 -->
        <svg width="200" height="200" style="border:1px solid #ccc;">
          <path id="output" fill="none" stroke="black" stroke-width="2" />
        </svg>
      </article>
      <aside>
        <h2>サイドメニュー</h2>
        <h3>大分県市町村境界</h3>
        <pre id="json"></pre>
      </aside>
    </main>
    <footer>フッター（常に下に表示）</footer>

    <script>
fetch('./N03-21_44_210101.geojson')
  .then(response => {
    if (!response.ok) throw new Error('Network response was not ok');
    return response.json();
  })
  .then(geojson => {
    const feature = geojson.features[0];
    console.log(feature)
    // 1. ここで処理を書く
    document.getElementById("json").textContent = JSON.stringify(feature.geometry, null, 2);

    const pointList = feature.geometry.coordinates[0]; 

    // 2. 最大・最小を求める
    const lons = pointList.map(p => p[0]);
    const lats = pointList.map(p => p[1]);
    const minLon = Math.min(...lons), maxLon = Math.max(...lons);
    const minLat = Math.min(...lats), maxLat = Math.max(...lats);

    // 3. 描画するSVG/Canvasのサイズ
    const width = 200, height = 200;

    // 4. 緯度経度→SVG座標変換関数
    const toSvgCoord = ([lon, lat]) => [
      ((lon - minLon) / (maxLon - minLon)) * width,
      height - ((lat - minLat) / (maxLat - minLat)) * height
    ];

    const pieces = pointList.map((point, i)=>{
      const [long, lat] = toSvgCoord(point);
      const prefix = i < 1 ? "M" : "L"
      return prefix + long + " " + lat;
    })
    document.getElementById("json").textContent = JSON.stringify(pointList, null, 2);

    let profile = "M10 10 L60 80 L120 20 L180 90 Z"
    profile = pieces.join(" ") + " Z"
    document.getElementById('output').setAttribute("d", profile);

  })
  .catch(error => {
    console.error('取得エラー:', error);
  });

    </script>
  </body>
</html>